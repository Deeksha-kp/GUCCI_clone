define(["jquery","eventDispatcher","breakpoints","viewport","os","imageLoader","fittext","heroResize"],function(e,t,i,a,h,s,r,n){function o(){d=v.hasClass("hero-tall")||v.hasClass("hero-regular")||v.hasClass("hero-short")?0:e("#header-main").height(),i.is("small")?u=m.SMALL:i.is("medium")?u=m.MEDIUM:i.is("standard")&&(u=p.length>0?m.STANDARD_MEDIUM:m.STANDARD_LARGE)}function l(t){setTimeout(function(){var a,s,r,o=e(window).width();if(f.removeAttr("style"),a=i.is("small")&&h.isCompatible()?document.documentElement.clientHeight:t.height,i.is("standard")){var l=e(".hero-background-image-large").height(),g=a-d-u;if(l>g)r=g,s=g+"px";else{if(0==d)var c=2.1;else var c=2.5;p.length>0&&(c=0==d?2.3:3),r=c/1*o-(d+u),s=r+"px"}}f.each(function(t){if(0===t){var i=e(this).find(".hero-content-centered").height(),a=i>r?i:r+"px",h=e(this).css("min-height").replace("px","");if(h>r)var n={"max-height":a,"min-height":a};else var n={"max-height":a};e(this).css(n)}else{var l="-"+e(this).parents(".content.gutter.capsule-content-wrapper").css("padding-left");e(this).css({"max-height":s,width:+o+"px",left:l,position:"relative"})}if(e(this).hasClass("hero-large_anchorage")){var g=e(this),c=e(".hero-background-image-large:eq(0)",e(this)),d=c.height()%2===0?c.height():c.height()-1;c[0].complete?g.css("height",d):c.on("load",function(){g.css("height",d)})}e("#hp-hero-carousel .hero-homepage").each(function(){e(this).removeAttr("style")})}),n.resizeHero(),window.heroLoaded=!0,window.dispatchEvent(new Event("heroLoaded"))},0)}function g(){var t,h=e(".dummy-hero-background-image");!i.is("small")&&h.length&&(t=e(new Image),h.removeClass("dummy-hero-background-image").removeClass("_prevent-load"),e.each(h[0].attributes,function(){this.specified&&t.attr(this.name,h.attr(this.name))}),h.replaceWith(t),s.loadImage(t.parent()),t.one("load",function(){l(a.get())}))}function c(){l(a.get())}var d,m={SMALL:0,MEDIUM:30,STANDARD_LARGE:120,STANDARD_MEDIUM:200},u=0,f=e(".hero-large"),p=e(".hero-medium"),v=e(".hero");if(v.hasClass("hero-big")||v.hasClass("hero-regular"))var m={STANDARD_LARGE:160};return{load:function(){function h(){}g(),o(),l(a.get()),i.change(function(){o(),g()}),a.resize(function(){l(a.get())}),t.dispatchAndListen("heroLarge",h),e("html").hasClass("mobile")&&!e("body").hasClass("new-design")&&jQuery(".hero-title").fitText()},initHeroImage:c}});